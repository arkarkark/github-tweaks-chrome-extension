// Generated by CoffeeScript 1.8.0
(function() {
  var config, foundLink, modifyLinks, observer, paths, regex;

  config = {
    childList: true,
    subtree: true
  };

  paths = new RegExp('/(issues|pull)(\\?|$\)');

  regex = new RegExp('/(issues|pull)/[0-9]');

  foundLink = function(n) {
    var href;
    href = n.getAttribute('href');
    if ((href != null ? href.search(regex) : void 0) !== -1) {
      if (n.getAttribute('target') === '_blank') {
        return;
      }
      n.setAttribute('target', '_blank');
      return n.addEventListener('click', function(event) {
        window.open(href, '_blank');
        return event.preventDefault();
      });
    }
  };

  modifyLinks = function(rootNode) {
    return [].slice.call(document.querySelectorAll('a')).forEach(function(n) {
      return foundLink(n);
    });
  };

  observer = new MutationObserver(function(mutations) {
    return mutations.some(function(mutation) {
      if (mutation.addedNodes) {
        if (window.location.pathname.search(paths) !== -1) {
          return [].slice.call(mutation.addedNodes).forEach(function(node) {
            return modifyLinks(node);
          });
        }
      }
    });
  });

  observer.observe(document.body, config);

}).call(this);
